{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\Usuario\\\\Documents\\\\GitHub\\\\poss\\\\tomato\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\Usuario\\\\Documents\\\\GitHub\\\\poss\\\\tomato\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"C:\\\\Users\\\\Usuario\\\\Documents\\\\GitHub\\\\poss\\\\tomato\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\Usuario\\\\Documents\\\\GitHub\\\\poss\\\\tomato\\\\src\\\\components\\\\Chat.js\";\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { AddCircle, CreditCard, Gif, EmojiEmotions } from '@material-ui/icons';\nimport ChatHeader from \"./ChatHeader\";\nimport app from \"../firebaseConfig\";\nimport { getFirestore, doc, setDoc } from \"firebase/firestore\";\nvar db = getFirestore(app);\n\nfunction ChatScreen(_ref) {\n  var Activechat = _ref.Activechat;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      chatList = _useState2[0],\n      setChatList = _useState2[1];\n\n  function getChat() {\n    return _getChat.apply(this, arguments);\n  }\n\n  function _getChat() {\n    _getChat = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var chats, collectionRef, chatCiphered;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              chats = [];\n              collectionRef = collection(db, \"chat\");\n              _context.next = 4;\n              return getDocs(collectionRef);\n\n            case 4:\n              chatCiphered = _context.sent;\n              chatCiphered.forEach(function (chatCiphered) {\n                chats.push(chatCiphered.data());\n              });\n              console.log(chats);\n              setChatList(chats);\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _getChat.apply(this, arguments);\n  }\n\n  useEffect(function () {\n    getChat();\n  }, []);\n\n  var _useState3 = useState(\"\"),\n      inputMensaje = _useState3.inputMensaje,\n      setInputMensaje = _useState3.setInputMensaje;\n\n  function sendMessage(e) {\n    e.preventDefault();\n    var docuRef = doc(db, \"chat/\".concat(Activechat, \"/mensajes/\").concat(new Date().getTime()));\n    setDoc(docuRef, {\n      mensajes: inputMensaje,\n      usuarios: \"Ignacio\"\n    });\n    setInputMensaje(\"\");\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"chat\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(ChatHeader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"chat_messages\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"chat_input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: sendMessage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    disabled: false,\n    value: inputMensaje,\n    onChange: function onChange(e) {\n      return setInputMensaje(e.target.value);\n    },\n    placeholder: \"Type your message\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    disabled: false,\n    value: inputMensaje,\n    clasName: \"chat_inputButton\",\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 17\n    }\n  }, \"Send Message\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"chat_inputIcons\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }\n  })));\n}\n\nexport default ChatScreen;","map":{"version":3,"names":["React","useState","useEffect","useRef","AddCircle","CreditCard","Gif","EmojiEmotions","ChatHeader","app","getFirestore","doc","setDoc","db","ChatScreen","Activechat","chatList","setChatList","getChat","chats","collectionRef","collection","getDocs","chatCiphered","forEach","push","data","console","log","inputMensaje","setInputMensaje","sendMessage","e","preventDefault","docuRef","Date","getTime","mensajes","usuarios","target","value"],"sources":["C:/Users/Usuario/Documents/GitHub/poss/tomato/src/components/Chat.js"],"sourcesContent":["import React, {useState, useEffect, useRef} from \"react\";\r\nimport {AddCircle, CreditCard, Gif, EmojiEmotions} from '@material-ui/icons';\r\nimport ChatHeader from \"./ChatHeader\";\r\nimport app from \"../firebaseConfig\";\r\nimport {getFirestore, doc, setDoc} from \"firebase/firestore\";\r\nconst db = getFirestore(app);\r\nfunction ChatScreen({Activechat}){\r\n    const[chatList, setChatList]=useState([]);\r\n\r\n    async function getChat(){\r\n    const chats = [];\r\n    const collectionRef = collection(db,\"chat\");\r\n    const chatCiphered = await getDocs(collectionRef);\r\n    chatCiphered.forEach(chatCiphered=>{\r\n      chats.push(chatCiphered.data());\r\n    })\r\n    console.log(chats);\r\n    setChatList(chats);\r\n  }\r\n\r\n  useEffect(()=>{\r\n    getChat();\r\n  },[]);\r\n\r\n    const {inputMensaje, setInputMensaje} = useState(\"\");\r\n\r\n    function sendMessage(e){\r\n        e.preventDefault();\r\n        const docuRef =doc(db,`chat/${Activechat}/mensajes/${new Date().getTime()}`)\r\n        setDoc(docuRef,{\r\n            mensajes:inputMensaje,\r\n            usuarios: \"Ignacio\"\r\n        })\r\n\r\n        setInputMensaje(\"\");\r\n    }\r\n    \r\n    return( <div className=\"chat\">\r\n\r\n        <ChatHeader />\r\n\r\n        <div className=\"chat_messages\">\r\n            {/*Mappear mensajes de firebases*/}\r\n        </div>\r\n        \r\n        <div className=\"chat_input\">\r\n           \r\n            <form onSubmit={sendMessage}>\r\n                <input type=\"text\" disabled={false} value={inputMensaje} \r\n                onChange={(e)=>setInputMensaje(e.target.value)} \r\n                placeholder=\"Type your message\"\r\n                />\r\n\r\n                <button disabled={false} value={inputMensaje} clasName=\"chat_inputButton\" type=\"submit\">\r\n                    Send Message\r\n                </button>\r\n\r\n            </form>\r\n\r\n            <div className=\"chat_inputIcons\">\r\n                \r\n            </div>\r\n\r\n        </div>\r\n    \r\n    </div>\r\n    )\r\n\r\n}\r\n\r\nexport default ChatScreen;"],"mappings":"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"},"metadata":{},"sourceType":"module"}