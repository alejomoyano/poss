{"ast":null,"code":"import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport { getApp } from 'firebase/app';\nimport { getFirestore, collection, onSnapshot } from \"firebase/firestore\";\nconst initialState = {\n  rooms: [],\n  error: null\n};\nexport const roomSlice = createSlice({\n  name: 'room',\n  initialState,\n  reducers: {\n    setRooms: (state, action) => {\n      state.rooms = action.payload.rooms;\n    }\n  }\n});\nconst {\n  setRooms\n} = roomSlice.actions;\nconst fetchAllRooms = createAsyncThunk('fetchAllRooms', async (_, thunkAPI) => {\n  try {\n    const app = getApp();\n    const db = getFirestore(app);\n    onSnapshot(collection(db, \"room\"), snapshot => {\n      const rooms = snapshot.docs.map(doc => doc.data());\n      return thunkAPI.dispatch(setRooms({\n        rooms\n      }));\n    }, error => {\n      console.log(error);\n      return thunkAPI.dispatch(setRooms({\n        error: error.message,\n        rooms: []\n      }));\n    });\n    return thunkAPI.dispatch(setRooms(initialState));\n  } catch (error) {\n    console.log(error);\n    return thunkAPI.dispatch(setRooms({\n      error: error.message,\n      rooms: []\n    }));\n  }\n});\nexport { // Thunks\nfetchAllRooms, // Reducers\nsetRooms };\nexport default roomSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","getApp","getFirestore","collection","onSnapshot","initialState","rooms","error","roomSlice","name","reducers","setRooms","state","action","payload","actions","fetchAllRooms","_","thunkAPI","app","db","snapshot","docs","map","doc","data","dispatch","console","log","message","reducer"],"sources":["C:/Users/Bruno/github/poss/tomato/src/redux/slices/room.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit'\r\nimport { getApp } from 'firebase/app';\r\nimport { getFirestore, collection, onSnapshot } from \"firebase/firestore\";\r\n\r\nconst initialState = {\r\n    rooms: [],\r\n    error: null,\r\n};\r\n\r\nexport const roomSlice = createSlice({\r\n    name: 'room',\r\n    initialState,\r\n    reducers: {\r\n        setRooms: (state, action) => {\r\n            state.rooms = action.payload.rooms;\r\n        },\r\n    },\r\n})\r\n\r\nconst { \r\n    setRooms,\r\n} = roomSlice.actions\r\n\r\nconst fetchAllRooms = createAsyncThunk(\r\n    'fetchAllRooms',\r\n    async (_, thunkAPI) => {\r\n        try {\r\n            const app = getApp();\r\n            const db = getFirestore(app);\r\n            onSnapshot(collection(db, \"room\"),\r\n            (snapshot) => {\r\n                const rooms = snapshot.docs.map((doc) => doc.data());\r\n                return thunkAPI.dispatch(setRooms({ rooms }));\r\n            },\r\n            (error) => {\r\n                console.log(error);\r\n                return thunkAPI.dispatch(setRooms({ error: error.message, rooms: [] }));\r\n            });\r\n            return thunkAPI.dispatch(setRooms(initialState));\r\n        } catch (error) {\r\n            console.log(error);\r\n            return thunkAPI.dispatch(setRooms({ error: error.message, rooms: [] }));\r\n        }\r\n    }\r\n)\r\n\r\nexport {\r\n    // Thunks\r\n    fetchAllRooms,\r\n    // Reducers\r\n    setRooms,\r\n};\r\n\r\nexport default roomSlice.reducer"],"mappings":"AAAA,SAASA,WAAT,EAAsBC,gBAAtB,QAA8C,kBAA9C;AACA,SAASC,MAAT,QAAuB,cAAvB;AACA,SAASC,YAAT,EAAuBC,UAAvB,EAAmCC,UAAnC,QAAqD,oBAArD;AAEA,MAAMC,YAAY,GAAG;EACjBC,KAAK,EAAE,EADU;EAEjBC,KAAK,EAAE;AAFU,CAArB;AAKA,OAAO,MAAMC,SAAS,GAAGT,WAAW,CAAC;EACjCU,IAAI,EAAE,MAD2B;EAEjCJ,YAFiC;EAGjCK,QAAQ,EAAE;IACNC,QAAQ,EAAE,CAACC,KAAD,EAAQC,MAAR,KAAmB;MACzBD,KAAK,CAACN,KAAN,GAAcO,MAAM,CAACC,OAAP,CAAeR,KAA7B;IACH;EAHK;AAHuB,CAAD,CAA7B;AAUP,MAAM;EACFK;AADE,IAEFH,SAAS,CAACO,OAFd;AAIA,MAAMC,aAAa,GAAGhB,gBAAgB,CAClC,eADkC,EAElC,OAAOiB,CAAP,EAAUC,QAAV,KAAuB;EACnB,IAAI;IACA,MAAMC,GAAG,GAAGlB,MAAM,EAAlB;IACA,MAAMmB,EAAE,GAAGlB,YAAY,CAACiB,GAAD,CAAvB;IACAf,UAAU,CAACD,UAAU,CAACiB,EAAD,EAAK,MAAL,CAAX,EACTC,QAAD,IAAc;MACV,MAAMf,KAAK,GAAGe,QAAQ,CAACC,IAAT,CAAcC,GAAd,CAAmBC,GAAD,IAASA,GAAG,CAACC,IAAJ,EAA3B,CAAd;MACA,OAAOP,QAAQ,CAACQ,QAAT,CAAkBf,QAAQ,CAAC;QAAEL;MAAF,CAAD,CAA1B,CAAP;IACH,CAJS,EAKTC,KAAD,IAAW;MACPoB,OAAO,CAACC,GAAR,CAAYrB,KAAZ;MACA,OAAOW,QAAQ,CAACQ,QAAT,CAAkBf,QAAQ,CAAC;QAAEJ,KAAK,EAAEA,KAAK,CAACsB,OAAf;QAAwBvB,KAAK,EAAE;MAA/B,CAAD,CAA1B,CAAP;IACH,CARS,CAAV;IASA,OAAOY,QAAQ,CAACQ,QAAT,CAAkBf,QAAQ,CAACN,YAAD,CAA1B,CAAP;EACH,CAbD,CAaE,OAAOE,KAAP,EAAc;IACZoB,OAAO,CAACC,GAAR,CAAYrB,KAAZ;IACA,OAAOW,QAAQ,CAACQ,QAAT,CAAkBf,QAAQ,CAAC;MAAEJ,KAAK,EAAEA,KAAK,CAACsB,OAAf;MAAwBvB,KAAK,EAAE;IAA/B,CAAD,CAA1B,CAAP;EACH;AACJ,CApBiC,CAAtC;AAuBA,SACI;AACAU,aAFJ,EAGI;AACAL,QAJJ;AAOA,eAAeH,SAAS,CAACsB,OAAzB"},"metadata":{},"sourceType":"module"}